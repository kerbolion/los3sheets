<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mi Store - Licencias Digitales</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Mi Store</h1>
            <p>Licencias Digitales</p>
        </div>

        <div class="content">
            <!-- Sección de Login/Registro -->
            <div id="auth-section">
                <div class="nav-links">
                    <button class="nav-link active" onclick="showLogin()">Iniciar Sesión</button>
                    <button class="nav-link" onclick="showRegister()">Registrarse</button>
                </div>

                <div id="login-form">
                    <div class="form-group">
                        <label for="login-whatsapp">Número de WhatsApp:</label>
                        <input type="number" id="login-whatsapp" placeholder="50688888888">
                    </div>
                    <div class="form-group">
                        <label for="login-password">Contraseña:</label>
                        <input type="password" id="login-password" placeholder="Tu contraseña">
                    </div>
                    <button class="btn" onclick="login()">Iniciar Sesión</button>
                </div>

                <div id="register-form" class="hidden">
                    <div class="form-group">
                        <label for="register-whatsapp">Número de WhatsApp:</label>
                        <input type="number" id="register-whatsapp" placeholder="50688888888">
                    </div>
                    <div class="form-group">
                        <label for="register-password">Contraseña:</label>
                        <input type="password" id="register-password" placeholder="Tu contraseña">
                    </div>
                    <button class="btn" onclick="register()">Registrarse</button>
                </div>
            </div>

            <!-- Sección Principal -->
            <div id="main-section" class="hidden">
                <div class="balance-info">
                    <div>Mi Saldo</div>
                    <div class="balance-amount">$<span id="balance">0.00</span></div>
                    <button class="btn-refresh" onclick="refreshAllData()" title="Actualizar datos">
                        🔄
                    </button>
                </div>

                <div class="nav-links">
                    <button class="nav-link active" onclick="showProducts()">Productos</button>
                    <button class="nav-link" onclick="showWallet()">Monedero</button>
                    <button class="nav-link" onclick="showMyItems()">Mis Servicios</button>
                </div>

                <!-- Productos -->
                <div id="products-section">
                    <!-- Tabs para tipos de productos -->
                    <div class="product-tabs">
                        <button class="product-tab active" onclick="showProductType('profiles')">
                            <span class="product-tab-icon">👤</span>
                            <span class="product-tab-label">Perfiles</span>
                            <span class="product-tab-count" id="profiles-count">0</span>
                        </button>
                        <button class="product-tab" onclick="showProductType('accounts')">
                            <span class="product-tab-icon">📧</span>
                            <span class="product-tab-label">Cuentas</span>
                            <span class="product-tab-count" id="accounts-count">0</span>
                        </button>
                        <button class="product-tab" onclick="showProductType('license')">
                            <span class="product-tab-icon">🎫</span>
                            <span class="product-tab-label">Licencias</span>
                            <span class="product-tab-count" id="license-count">0</span>
                        </button>
                    </div>

                    <!-- Contenidos de cada tab -->
                    <div id="profiles-tab" class="tab-content active">
                        <div class="tab-description">
                            <p>🎯 <strong>Perfiles:</strong> Acceso a perfiles compartidos con PIN incluido</p>
                        </div>
                        <div class="products-grid" id="profiles-grid">
                            <div class="loading">Cargando perfiles...</div>
                        </div>
                    </div>

                    <div id="accounts-tab" class="tab-content">
                        <div class="tab-description">
                            <p>🔐 <strong>Cuentas:</strong> Cuentas completas con email y contraseña</p>
                        </div>
                        <div class="products-grid" id="accounts-grid">
                            <div class="loading">Cargando cuentas...</div>
                        </div>
                    </div>

                    <div id="license-tab" class="tab-content">
                        <div class="tab-description">
                            <p>🎫 <strong>Licencias:</strong> Códigos y licencias digitales</p>
                        </div>
                        <div class="products-grid" id="license-grid">
                            <div class="loading">Cargando licencias...</div>
                        </div>
                    </div>
                </div>

                <!-- Monedero -->
                <div id="wallet-section" class="hidden">
                    <!-- Métodos de Pago -->
                    <div class="payment-methods">
                        <div class="payment-title">Métodos de Pago</div>
                        <div class="payment-info">
                            <div class="payment-method">
                                <strong>Sinpe Móvil:</strong> 7223 3620<br>
                                <strong>Nombre:</strong> Kevin López Reyes
                            </div>
                        </div>
                    </div>

                    <!-- Canjear Cupón -->
                    <div class="giftcard-section">
                        <div class="giftcard-title">🎁 Canjear 🎴 Giftcard</div>
                        <div class="form-group">
                            <label for="giftcard-code">Código de Giftcard:</label>
                            <input type="text" id="giftcard-code" placeholder="Ingresa el código de la giftcard" autocomplete="off">
                        </div>
                        <button class="btn btn-giftcard" onclick="redeemGiftcard()">🎁 Canjear 🎴 Giftcard</button>
                        <div class="giftcard-info">
                            <small>💡 Las giftcard tienen fecha de vencimiento. Asegúrate de canjearlas antes de que expiren.</small>
                        </div>
                    </div>

                    <!-- Agregar Fondos -->
                    <div class="add-funds-section">
                        <h3>💰 Agregar Fondos</h3>
                        <div class="add-funds-info">
                            <p>Para agregar fondos a tu cuenta:</p>
                            <ol>
                                <li>Realiza un Sinpe Móvil al número indicado arriba</li>
                                <li>Incluye tu número de WhatsApp en el concepto</li>
                                <li>Envía el comprobante por WhatsApp</li>
                                <li>Los fondos se agregarán a tu cuenta una vez verificado el pago</li>
                            </ol>
                        </div>
                        <div class="form-group">
                            <label for="add-funds">Cantidad (solo para referencia):</label>
                            <input type="number" id="add-funds" placeholder="Cantidad" min="1" step="0.01" readonly>
                        </div>
                        <button class="btn" onclick="addFunds()" disabled>Agregar Fondos (Manual)</button>
                        <div class="manual-info">
                            <small>⚠️ Los fondos deben ser agregados manualmente por el administrador después de verificar el pago.</small>
                        </div>
                    </div>
                </div>

                <!-- Mis Servicios -->
                <div id="my-items-section" class="hidden">
                    <!-- Tabs para servicios del usuario -->
                    <div class="service-tabs">
                        <button class="service-tab active" onclick="showServiceType('profiles')">
                            <span class="service-tab-icon">👤</span>
                            <span class="service-tab-label">Mis Perfiles</span>
                            <span class="service-tab-count" id="user-profiles-count">0</span>
                        </button>
                        <button class="service-tab" onclick="showServiceType('accounts')">
                            <span class="service-tab-icon">📧</span>
                            <span class="service-tab-label">Mis Cuentas</span>
                            <span class="service-tab-count" id="user-accounts-count">0</span>
                        </button>
                    </div>

                    <!-- Contenidos de servicios -->
                    <div id="user-profiles-tab" class="service-content active">
                        <div id="user-profiles-list">
                            <div class="loading">Cargando perfiles...</div>
                        </div>
                    </div>

                    <div id="user-accounts-tab" class="service-content">
                        <div id="user-accounts-list">
                            <div class="loading">Cargando cuentas...</div>
                        </div>
                    </div>
                </div>

                <button class="btn btn-secondary" onclick="logout()">Cerrar Sesión</button>
            </div>

            <!-- Mensajes -->
            <div id="message-area"></div>
        </div>
    </div>

    <!-- Scripts externos -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="script.js"></script>
</body>
</html>